{"version":3,"sources":["../../../src/api/channel/channel.middleware.js"],"names":["Joi","objectId","createChannelValidator","object","keys","name","string","required","limit","number","getListChannelsValidator","max","skip","min","status","any","allow","validateCreatedChannel","req","res","next","body","error","validate","fail","message","validateGetListChannels","query"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEAA,cAAIC,QAAJ,GAAe,2BAASD,aAAT,CAAf;;AAEA,MAAME,yBAAyBF,cAAIG,MAAJ,GAAaC,IAAb,CAAkB;AAC/CC,QAAML,cAAIM,MAAJ,GAAaC,QAAb,EADyC;AAE/CC,SAAOR,cAAIS,MAAJ,GAAaF,QAAb;AAFwC,CAAlB,CAA/B;;AAKA,MAAMG,2BAA2BV,cAAIG,MAAJ,GAAaC,IAAb,CAAkB;AACjDI,SAAOR,cAAIS,MAAJ,GAAaE,GAAb,CAAiB,GAAjB,CAD0C;AAEjDC,QAAMZ,cAAIS,MAAJ,GAAaI,GAAb,CAAiB,CAAjB,CAF2C;AAGjDC,UAAQd,cAAIe,GAAJ,GAAUC,KAAV,CAAgB,QAAhB;AAHyC,CAAlB,CAAjC;;AAMA;AACA;AACA;AACA;;AAEO,MAAMC,0DAAyB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxD,MAAI;AACF,UAAM,EAAEf,IAAF,EAAQG,KAAR,KAAkBU,IAAIG,IAA5B;AACA,UAAMC,QAAQtB,cAAIuB,QAAJ,CAAa,EAAElB,IAAF,EAAQG,KAAR,EAAb,EAA8BN,sBAA9B,CAAd;AACAoB,UAAMA,KAAN,KAAgB,IAAhB,GAAuBF,MAAvB,GAAgCD,IAAIK,IAAJ,CAASF,KAAT,CAAhC;AACD,GAJD,CAIE,OAAOA,KAAP,EAAc;AACdH,QAAIK,IAAJ,CAASF,MAAMG,OAAf;AACD;AACF,CARM;;AAUA,MAAMC,4DAA0B,CAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACzD,MAAI;AACF,UAAM,EAAEZ,KAAF,EAASI,OAAO,CAAhB,EAAmBE,MAAnB,KAA8BI,IAAIS,KAAxC;AACA,UAAML,QAAQtB,cAAIuB,QAAJ,CAAa,EAACf,KAAD,EAAQI,IAAR,EAAaE,MAAb,EAAb,EAAmCJ,wBAAnC,CAAd;AACAY,UAAMA,KAAN,KAAgB,IAAhB,GAAuBF,MAAvB,GAAgCD,IAAIK,IAAJ,CAASF,KAAT,CAAhC;AACD,GAJD,CAIE,OAAOA,KAAP,EAAc;AACdH,QAAIK,IAAJ,CAASF,MAAMG,OAAf;AACD;AACF,CARM;;AAUP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"channel.middleware.js","sourcesContent":["import Joi from 'joi';\r\nimport objectid from 'joi-objectid';\r\n\r\nJoi.objectId = objectid(Joi);\r\n\r\nconst createChannelValidator = Joi.object().keys({\r\n  name: Joi.string().required(),\r\n  limit: Joi.number().required()\r\n});\r\n\r\nconst getListChannelsValidator = Joi.object().keys({\r\n  limit: Joi.number().max(100),\r\n  skip: Joi.number().min(0),\r\n  status: Joi.any().allow('active')\r\n});\r\n\r\n// const updateSubjectValidator = Joi.object().keys({\r\n//   name: Joi.string(),\r\n//   teachers: Joi.array()\r\n// });\r\n\r\nexport const validateCreatedChannel = (req, res, next) => {\r\n  try {\r\n    const { name, limit } = req.body;\r\n    const error = Joi.validate({ name, limit }, createChannelValidator);\r\n    error.error === null ? next() : res.fail(error);\r\n  } catch (error) {\r\n    res.fail(error.message);\r\n  }\r\n};\r\n\r\nexport const validateGetListChannels = (req, res, next) => {\r\n  try {\r\n    const { limit, skip = 0, status } = req.query;\r\n    const error = Joi.validate({limit, skip,status}, getListChannelsValidator);\r\n    error.error === null ? next() : res.fail(error);\r\n  } catch (error) {\r\n    res.fail(error.message);\r\n  }\r\n};\r\n\r\n// export const validateUpdateSubject = (req, res, next) => {\r\n//   try {\r\n//     const { name, teachers } = req.body;\r\n//     const error = Joi.validate({ name, teachers }, updateSubjectValidator);\r\n//     error.error === null ? next() : res.fail(error.value);\r\n//   } catch (error) {\r\n//     res.fail(error.message);\r\n//   }\r\n// };\r\n"]}