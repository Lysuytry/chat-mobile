{"version":3,"sources":["../src/index.js"],"names":["server","require","Server","app","io","PORT","process","env","use","req","res","next","error","Error","status","err","json","of","on","chatHandler","onlineHandler","listen","console","log"],"mappings":";;AAAA;;;;AACA;;;;AAEA,MAAMA,SAASC,QAAQ,MAAR,EAAgBC,MAAhB,CAAuBC,aAAvB,CAAf;AACA,MAAMC,KAAKH,QAAQ,WAAR,EAAqBD,MAArB,CAAX;;AAEA,MAAM,EAAEK,IAAF,KAAWC,QAAQC,GAAzB;;AAEA;AACAJ,cAAIK,GAAJ,CAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1B,QAAMC,QAAQ,IAAIC,KAAJ,CAAU,WAAV,CAAd;AACAD,QAAME,MAAN,GAAe,GAAf;AACAH,OAAKC,KAAL;AACD,CAJD;;AAMA;AACA;AACAT,cAAIK,GAAJ,CAAQ,CAACO,GAAD,EAAMN,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AAC/B,SAAOD,IAAII,MAAJ,CAAWC,IAAID,MAAJ,IAAc,GAAzB,EAA8BE,IAA9B,CAAmCD,GAAnC,CAAP;AACD,CAFD;;AAIAX,GAAGa,EAAH,CAAM,WAAN,EAAmBC,EAAnB,CAAsB,YAAtB,EAAoCC,mBAApC;AACAf,GAAGa,EAAH,CAAM,SAAN,EAAiBC,EAAjB,CAAoB,YAApB,EAAkCE,qBAAlC;;AAEApB,OAAOqB,MAAP,CAAchB,IAAd,EAAoB,MAAM;AACxBiB,UAAQC,GAAR,CAAa,oBAAmBlB,IAAK,sBAArC;AACD,CAFD","file":"index.js","sourcesContent":["import app from './app';\r\nimport { chatHandler, onlineHandler } from './socket.io/socket';\r\n\r\nconst server = require('http').Server(app);\r\nconst io = require('socket.io')(server);\r\n\r\nconst { PORT } = process.env;\r\n\r\n//if no route match => matched this route instead\r\napp.use((req, res, next) => {\r\n  const error = new Error('Not found');\r\n  error.status = 404;\r\n  next(error);\r\n});\r\n\r\n//error handling middleware\r\n//always at the bottom of the code\r\napp.use((err, req, res, next) => {\r\n  return res.status(err.status || 500).json(err);\r\n});\r\n\r\nio.of('/chatroom').on('connection', chatHandler);\r\nio.of('/online').on('connection', onlineHandler);\r\n\r\nserver.listen(PORT, () => {\r\n  console.log(`We are open port ${PORT} for our express app`);\r\n});\r\n"]}